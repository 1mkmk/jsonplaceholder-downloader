#!/bin/bash
# Simple HTTP server for {{ frontend_name }}
# Generated by Ansible on {{ ansible_date_time.date }}

cd {{ frontend_dir }}/dist

# Set environment variables
{% for key, value in frontend_env_vars.items() %}
export {{ key }}="{{ value }}"
{% endfor %}

# Check if npx is installed
if command -v npx &> /dev/null; then
    echo "Starting server with npx serve..."
    exec npx serve -s -l {{ frontend_port }}
else
    echo "Npx not found, installing serve package..."
    npm install -g serve
    exec serve -s -l {{ frontend_port }}
fi